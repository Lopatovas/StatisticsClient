(this["webpackJsonpstatistics-client"]=this["webpackJsonpstatistics-client"]||[]).push([[0],{159:function(e,t,a){e.exports=a(272)},164:function(e,t,a){},165:function(e,t,a){},272:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),o=a(144),r=a.n(o),i=(a(164),a(165),a(152)),c=a(37),s=a(155),d=a(72),u=a(73),m=a(81),p=a(74),h=a(48),E=a(82),v=a(282),f=a(278);var g=function(e){var t=e.changeHandler;return l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("div",{className:"input-group input-group-alternative mb-4"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"ni ni-zoom-split-in"}))),l.a.createElement("input",{className:"form-control form-control-alternative",placeholder:"Search",type:"text",onChange:function(e){t(e)}}))))};var y=function(e){var t=e.items,a=e.clickCallback,n=e.productCallback,o=e.renderAction;return l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Name"),l.a.createElement("th",{scope:"col"},"Category"),l.a.createElement("th",{scope:"col"},"Price"),l.a.createElement("th",{scope:"col"},"Action"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",{key:e.id,onClick:function(){n(e)}},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.type),l.a.createElement("td",null,e.price),o?l.a.createElement("td",null,l.a.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(t){t.stopPropagation(),a(e)}},"Compare")):l.a.createElement("td",null))})))))};function b(e){var t=e.items;return l.a.createElement("div",null,l.a.createElement("ul",{className:"list-group list-group-flush"},t.map((function(e,t){return l.a.createElement("li",{className:"list-group-item list-group-item-action",key:t},"object"===typeof e?e.name:e," ")}))))}b.defaultProps={items:[]};var C=b;function S(e){var t=e.children,a=e.onClose,n=e.show;return n?l.a.createElement("div",{style:{position:"absolute",zIndex:999,width:"100%",height:"100%",backgroundColor:"#F5F5F5C0"}},l.a.createElement("div",{style:{margin:"auto",width:600,height:500,backgroundColor:"#FFF",marginTop:100,boxShadow:"10px 10px 10px #888888"}},l.a.createElement("div",{style:{float:"right",marginTop:5,marginRight:5}},l.a.createElement("button",{className:"btn btn-default btn-sm",onClick:function(e){!function(e){a(e)}(e)},type:"button"},"X")),l.a.createElement("div",null,t))):null}S.defaultProps={children:null,onClose:function(){},show:!1};var T=S,k=a(280);function N(e){var t=e.children;return l.a.createElement(k.a,{padding:{top:20,bottom:60,left:60,right:20},domainPadding:{x:[10,-10],y:5}},t)}N.defaultProps={children:l.a.createElement("div",null)};var w=N,I=a(156),x={MAIN_ENDPOINT:"http://127.0.0.1:8000",PRODUCTS:"/products",CATEGORIES:"/categories",PAGINATION:"/pagination",CATEGORY:"/category",LAST_WEEK_STAT:"/getLastWeekSales",LAST_YEAR_STAT:"/getLastYearSales",PREDICTIONS:"/getPredictions",LINEAR_REGRESION:"/getLinearRegression",PRODUCT:"/getProductById"},O={apiCall:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"GET"};return new Promise((function(a,n){var l=Object(I.a)({},t);fetch("".concat(x.MAIN_ENDPOINT).concat(e),l).then((function(e){try{a(e.json())}catch(t){n(t)}})).catch((function(e){return n(e)}))}))},CONFIG:x},P=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={categories:[],products:[],compareList:[],querried:[],showModal:!1,weekStats:{}},a.filterItems=a.filterItems.bind(Object(h.a)(a)),a.addToCompare=a.addToCompare.bind(Object(h.a)(a)),a.navigateToProduct=a.navigateToProduct.bind(Object(h.a)(a)),a}return Object(E.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getCategories(),this.getProducts()}},{key:"getCategories",value:function(){var e=this;O.apiCall(O.CONFIG.CATEGORIES,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET"}).then((function(t){e.setState({categories:t.categories})}))}},{key:"getProducts",value:function(){var e=this;O.apiCall(O.CONFIG.PRODUCTS,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET"}).then((function(t){e.setState({products:t.products,querried:t.products})}))}},{key:"getLastWeekStats",value:function(e){var t=this;O.apiCall("".concat(O.CONFIG.LAST_WEEK_STAT,"/").concat(e.id),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET"}).then((function(a){var n=t.state.weekStats;n[e.name]=a.weekSales,t.setState({weekStats:n})}))}},{key:"filterItems",value:function(e){var t=e.target.value,a=this.state.products.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())?e:null}));this.setState({querried:a})}},{key:"addToCompare",value:function(e){var t=this.state,a=t.compareList,n=t.querried;this.setState({compareList:[].concat(Object(s.a)(a),[e]),querried:n.filter((function(t){return t.id!==e.id}))})}},{key:"navigateToProduct",value:function(e){this.props.history.push("/StatisticsClient/Product/".concat(e.id))}},{key:"render",value:function(){var e,t,a,n,o=this,r=this.state,i=r.categories,c=r.querried,s=r.compareList,d=r.products,u=r.showModal,m=r.weekStats,p={duration:2e3,onLoad:{duration:1e3}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(T,{show:u,onClose:function(){o.setState({showModal:!1})}},l.a.createElement("div",null,l.a.createElement("h5",{style:{paddingLeft:20,paddingTop:20}},"Statistics for last week sales"),l.a.createElement(w,null,l.a.createElement(v.a,{x:175,y:0,orientation:"horizontal",style:{title:{fontSize:10}},data:[{name:null===(e=s[1])||void 0===e?void 0:e.name,symbol:{fill:"#428bca"}},{name:null===(t=s[0])||void 0===t?void 0:t.name,symbol:{fill:"#c43a31"}}]}),l.a.createElement(f.a,{style:{data:{stroke:"#c43a31"},parent:{border:"1px solid #ccc"}},animate:p,data:m[null===(a=s[0])||void 0===a?void 0:a.name],x:function(e){var t;return null===e||void 0===e?void 0:null===(t=e.day)||void 0===t?void 0:t.substring(5,e.day.length)},y:"sales"}),l.a.createElement(f.a,{style:{data:{stroke:"#428bca"}},animate:p,data:m[null===(n=s[1])||void 0===n?void 0:n.name],x:function(e){var t;return null===e||void 0===e?void 0:null===(t=e.day)||void 0===t?void 0:t.substring(5,e.day.length)},y:"sales"})))),l.a.createElement("div",{className:"container pt-5"},l.a.createElement(g,{changeHandler:this.filterItems}),l.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"space-between"}},l.a.createElement("div",{className:"card shadow rounded",style:{flex:1,marginRight:50,height:"80vh"}},l.a.createElement("h2",{className:"pt-4 pl-4"},"Categories"),l.a.createElement("div",{style:{height:"78vh",overflow:"overlay"}},l.a.createElement(C,{items:i}))),l.a.createElement("div",{className:"card shadow rounded",style:{flex:4}},l.a.createElement("h2",{className:"pt-4 pl-4"},"Products"),l.a.createElement("div",{className:"pl-4 pr-4",style:{height:"70vh",overflow:"overlay"}},l.a.createElement(y,{items:c,productCallback:function(e){o.navigateToProduct(e)},clickCallback:function(e){o.addToCompare(e)},renderAction:s.length<2}))),l.a.createElement("div",{className:"card shadow rounded",style:{flex:1,marginLeft:50,height:"80vh"}},l.a.createElement("h2",{className:"pt-4 pl-4"},"Comparable products"),l.a.createElement("div",{style:{height:"70vh",overflow:"overlay"}},l.a.createElement(C,{items:s})),s.length>1?l.a.createElement("button",{type:"button",className:"btn btn-default w-75 mr-4 ml-4 mb-2 mt-2",onClick:function(){o.setState({showModal:!0}),s.forEach((function(e){o.getLastWeekStats(e)}))}},"Compare"):null,s.length>0?l.a.createElement("button",{type:"button",className:"btn btn-default w-75 mr-4 ml-4 mb-2",onClick:function(){o.setState({compareList:[],querried:d})}},"Clear"):null))))}}]),t}(n.Component);function j(e){var t=e.label,a=e.value;return l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("div",{style:{flex:1,marginRight:20}},l.a.createElement("h6",null,t)),l.a.createElement("div",{className:"progress",style:{height:"20px",flex:3}},l.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(100*a/100,"%")},"aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":100},Math.round(a))))}j.defaultProps={label:[],value:0};var A=j,L=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).productId=e.match.params.id,a.state={product:{},weekStats:[{day:"",sales:0}],yearStats:[{month:"",sales:0}],prediction:{},regression:[]},a}return Object(E.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getProduct(),this.getLastWeekStats(),this.getLastYearStats(),this.getPrediction(),this.getRegression()}},{key:"getProduct",value:function(){var e=this;O.apiCall("".concat(O.CONFIG.PRODUCT,"/").concat(this.productId),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET"}).then((function(t){e.setState({product:t.product})}))}},{key:"getLastWeekStats",value:function(){var e=this;O.apiCall("".concat(O.CONFIG.LAST_WEEK_STAT,"/").concat(this.productId),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET"}).then((function(t){e.setState({weekStats:t.weekSales})}))}},{key:"getLastYearStats",value:function(){var e=this;O.apiCall("".concat(O.CONFIG.LAST_YEAR_STAT,"/").concat(this.productId),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET"}).then((function(t){e.setState({yearStats:t.yearSales})}))}},{key:"getPrediction",value:function(){var e=this;O.apiCall("".concat(O.CONFIG.PREDICTIONS,"/").concat(this.productId),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET"}).then((function(t){e.setState({prediction:t})}))}},{key:"getRegression",value:function(){var e=this;O.apiCall("".concat(O.CONFIG.LINEAR_REGRESION,"/").concat(this.productId),{headers:{"Content-Type":"application/json",Accept:"application/json"},method:"GET"}).then((function(t){e.setState({regression:t.regression})}))}},{key:"render",value:function(){var e=this.state,t=e.product,a=e.weekStats,n=e.yearStats,o=e.prediction,r=e.regression,i={duration:2e3,onLoad:{duration:1e3}},c={data:{stroke:"#c43a31"},parent:{border:"1px solid #ccc"}};return l.a.createElement("div",{className:"container pt-5"},l.a.createElement("div",{className:"card shadow rounded p-4"},l.a.createElement("h1",{style:{borderBottom:"2px solid #E7E7F5"}},t.name),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("div",{style:{flex:1,borderRight:"2px solid #E7E7F5",borderBottom:"2px solid #E7E7F5"}},l.a.createElement("h5",{style:{paddingLeft:20}},"Statistics for last year"),l.a.createElement(w,null,l.a.createElement(v.a,{x:100,y:0,orientation:"horizontal",style:{title:{fontSize:10}},data:[{name:"Linear regression",symbol:{fill:"#428bca"}},{name:"Actual sales",symbol:{fill:"#c43a31"}}]}),l.a.createElement(f.a,{style:c,animate:i,data:n,x:function(e){return e.month.substring(5,e.month.length)},y:"sales"}),l.a.createElement(f.a,{style:{data:{stroke:"#428bca"}},animate:i,data:r,x:function(e){return e.month.substring(5,e.month.length)},y:"regression"}))),l.a.createElement("div",{style:{flex:1,borderBottom:"2px solid #E7E7F5"}},l.a.createElement("h5",{style:{paddingLeft:20}},"Statistics for last week"),l.a.createElement(w,null,l.a.createElement(f.a,{style:c,animate:i,data:a,x:function(e){return e.day.substring(5,e.day.length)},y:"sales"})))),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h5",{style:{paddingLeft:20,paddingTop:20}},"Predicted sales")),l.a.createElement("div",{style:{paddingLeft:20,paddingTop:20}},l.a.createElement(A,{label:"Sales at same time last year",value:o.yearBeforeSales}),l.a.createElement(A,{label:"Sales three months ago",value:o.salesThreeMonthsBefore}),l.a.createElement(A,{label:"Sales two months ago",value:o.salesTwoMonthsBefore}),l.a.createElement(A,{label:"Sales a month ago",value:o.salesMonthBefore}),l.a.createElement(A,{label:"Sales predicted by linear regression",value:o.linearRegressionPrediction}),l.a.createElement(A,{label:"Final prediction for next month",value:o.finalPrediction})))))}}]),t}(n.Component);var R=function(){return l.a.createElement(i.a,null,l.a.createElement(c.c,null,l.a.createElement(c.a,{exact:!0,path:"/StatisticsClient/",component:P}),l.a.createElement(c.a,{exact:!0,path:"/StatisticsClient/Product/:id",component:L})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[159,1,2]]]);
//# sourceMappingURL=main.0b91f551.chunk.js.map